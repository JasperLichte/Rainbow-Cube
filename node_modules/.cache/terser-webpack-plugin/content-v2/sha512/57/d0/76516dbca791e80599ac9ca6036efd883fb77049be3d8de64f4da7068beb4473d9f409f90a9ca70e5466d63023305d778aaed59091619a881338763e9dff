{"code":"!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=0)}([function(e,t,n){\"use strict\";n.r(t);window.THREE;var r=(e,t)=>{e.getIncrementors();const n=e.getScene(),r=e.getCamera(),i=e.getRenderer();e.clearScene().buildLevel(t).listenForCameraMovements(),function t(){e.animateCameraPosition(),i.render(n,r),requestAnimationFrame(t)}()},i=Object.freeze({wall:\"x\",player:\"@\",lava:\"*\",coin:\"o\",void:\"-\",spikes:\"^\"});const o=i.wall,s=i.coin,c=i.void;i.lava;var a=[[c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c],[c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c],[c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c],[c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c],[c,c,c,c,c,c,c,s,c,i.spikes,c,c,c,c,c,c,c,c,c,c,c,c,c,c],[c,c,c,c,c,c,c,o,o,o,o,c,c,s,s,c,c,c,c,c,c,c,c,c],[c,c,c,c,c,c,c,c,c,c,c,c,c,o,o,c,c,c,c,c,c,c,c,c],[c,c,c,c,c,c,c,c,c,o,o,c,c,c,c,c,c,c,c,c,c,c,c,c],[c,c,c,c,c,o,o,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c],[c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c],[o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o],[c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c]];const l=i.wall,h=i.coin,d=i.void,m=i.spikes;var u=[[d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d],[d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d],[d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d],[d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d],[d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d],[d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d],[d,d,d,d,d,d,d,d,d,d,m,m,d,d,d,d,d,d,d,d,d,d,d,d],[d,d,d,d,d,d,d,d,d,l,l,l,l,d,d,d,d,d,d,d,d,d,d,d],[d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d],[d,d,d,d,d,d,d,d,d,d,h,h,d,d,d,d,d,d,d,d,d,d,d,d],[l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l],[d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d]];const _=i.wall,b=(i.coin,i.void),w=i.spikes;var g=[a,u,[[b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b],[b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b],[b,b,b,b,b,b,b,b,b,b,b,b,b,_,_,_,_,_,b,b,b,b,b,b],[b,b,b,b,b,b,b,b,b,b,b,b,b,w,w,w,w,w,b,b,b,b,b,b],[b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b],[b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b],[b,b,b,b,b,b,b,_,b,b,_,_,_,b,b,b,b,b,b,b,b,b,b,b],[b,b,b,b,b,b,_,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b],[b,b,b,b,b,_,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b],[b,b,b,b,_,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b],[_,_,_,_,b,b,b,b,b,b,b,b,_,_,_,_,_,_,_,_,_,_,_,_],[b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b]]],y={background:\"#992244\",objects:{wall:{body:\"#222222\",border:\"#eeeeee\"},coin:\"#cccc00\"}};class f{static getBlockTypeBySymbol(e=\"\"){for(const t in i)if(i[t]===e)return t;return\"\"}}const v=window.THREE;class p{constructor(e=16777215){this._geometry=new v.BoxGeometry(.85,.85,.85),this._material=new v.MeshBasicMaterial({color:e}),this._object=new v.Mesh(this._geometry,this._material),this.getObject=this.getObject.bind(this)}getObject(){return this._object}}const j=window.THREE;class x extends p{constructor(){super(new j.Color(y.objects.wall.body));const e=new j.LineSegments(new j.EdgesGeometry(this._object.geometry),new j.LineBasicMaterial({color:y.objects.wall.border,linewidth:1}));e.renderOrder=1,this._object.add(e)}}const E=window.THREE;class S{constructor(){this._geometry=new E.TorusGeometry(.2,.05,16,100),this._material=new E.MeshBasicMaterial({color:y.objects.coin}),this._object=new E.Mesh(this._geometry,this._material),this._object.rotation.y=90,this.getObject=this.getObject.bind(this),this._rotate=this._rotate.bind(this),this._rotate()}getObject(){return this._object}_rotate(){this._object.rotation.y+=.1,console.log(this._object.rotation),requestAnimationFrame(this._rotate)}}const k=window.THREE;class B{constructor(){this._scene=new k.Scene,this._scene.background=new k.Color(new k.Color(y.background)),this._camera=new k.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),this._scene.add(this._camera),this._renderer=new k.WebGLRenderer({antialias:!0}),this._renderer.setSize(window.innerWidth,window.innerHeight),window.addEventListener(\"resize\",e=>this._renderer.setSize(window.innerWidth,window.innerHeight)),document.body.appendChild(this._renderer.domElement),this._incrementors={camera:{x:0,y:5,z:10}},this.getScene=this.getScene.bind(this),this.getRenderer=this.getRenderer.bind(this),this.buildLevel=this.buildLevel.bind(this),this.insertBlockIntoScene=this.insertBlockIntoScene.bind(this),this.listenForCameraMovements=this.listenForCameraMovements.bind(this),this.animateCameraPosition=this.animateCameraPosition.bind(this),this.clearScene=this.clearScene.bind(this)}getScene(){return this._scene}getRenderer(){return this._renderer}getCamera(){return this._camera}getIncrementors(){return this._incrementors}buildLevel(e=[]){if(!Array.isArray(e))return;let t=[];for(let n=0;n<e.length;n++){const r=e[n];if(!Array.isArray(r))return;for(let e=0;e<r.length;e++){const i=f.getBlockTypeBySymbol(r[e]),o=B.getBlockByType(i);o&&t.push({block:o,pos:{x:e,y:n}})}}t=function(e){let t=e.length;for(;t>0;){let n=Math.floor(Math.random()*t),r=e[--t];e[t]=e[n],e[n]=r}return e}(t);let n=0;const r=setInterval(e=>{if(n>=t.length)return void clearInterval(r);const{block:i,pos:o}=t[n++];this.insertBlockIntoScene(i,o)},35);return this}insertBlockIntoScene(e,t){if(!e)return;const n=t.x-11.5,r=-1*t.y+8;this._scene.add(e),e.position.set(n,r,0)}static getBlockByType(e=\"\"){let t=null;switch(e){case\"wall\":t=new x;break;case\"coin\":t=new S}return t&&t.getObject?t.getObject():null}listenForCameraMovements(){let e=!1,t={};return this._renderer.domElement.addEventListener(\"wheel\",t=>{e=!1,t.deltaY<0?this._incrementors.camera.z>=5&&(this._incrementors.camera.z-=.6):this._incrementors.camera.z<=35&&(this._incrementors.camera.z+=.6)}),this._renderer.domElement.addEventListener(\"mousedown\",t=>{e=!0}),this._renderer.domElement.addEventListener(\"mouseup\",t=>{e=!1}),this._renderer.domElement.addEventListener(\"mousemove\",n=>{if(!e)return;t.x||(t={x:n.x,y:n.y});const r={x:n.x,y:n.y},i=t.x<r.x,o=t.x>r.x;i?this._incrementors.camera.x<17.5&&(this._incrementors.camera.x+=.25):o&&this._incrementors.camera.x>-17.5&&(this._incrementors.camera.x-=.25),t=r}),this}animateCameraPosition(){this._camera.position.x=this._incrementors.camera.x,this._camera.position.y=this._incrementors.camera.y,this._camera.position.z=this._incrementors.camera.z,this._camera.lookAt(new k.Vector3(0,0,0))}clearScene(){for(;this._scene.children.length>0;)this._scene.remove(this._scene.children[0]);return this}}const M=new B,O=function*(e){let t=0;for(;;)yield e[t++%e.length]}(g);r(M,O.next().value),document.getElementById(\"next-level-btn\").addEventListener(\"click\",e=>{r(M,O.next().value)})}]);","extractedComments":[]}