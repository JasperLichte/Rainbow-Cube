!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var r=(e,t)=>{e.getIncrementors();const n=e.getScene(),r=e.getCamera(),i=e.getRenderer();e.clearScene().buildLevel(t).listenForCameraMovements(),function t(){e.animateCameraPosition(),i.render(n,r),requestAnimationFrame(t)}()},i=Object.freeze({wall:"x",player:"@",lava:"*",coin:"o",void:"-",spikes:"^"});const s=i.wall,o=i.coin,a=i.void;i.lava;var c=[[a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a],[a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a],[a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a],[a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a],[a,a,a,a,a,a,a,o,a,i.spikes,a,a,a,a,a,a,a,a,a,a,a,a,a,a],[a,a,a,a,a,a,a,s,s,s,s,a,a,o,o,a,a,a,a,a,a,a,a,a],[a,a,a,a,a,a,a,a,a,a,a,a,a,s,s,a,a,a,a,a,a,a,a,a],[a,a,a,a,a,a,a,a,a,s,s,a,a,a,a,a,a,a,a,a,a,a,a,a],[a,a,a,a,a,s,s,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a],[a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a],[s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s],[a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a]];const l=i.wall,h=i.coin,d=i.void,m=i.spikes;var u=[[d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d],[d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d],[d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d],[d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d],[d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d],[d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d],[d,d,d,d,d,d,d,d,d,d,m,m,d,d,d,d,d,d,d,d,d,d,d,d],[d,d,d,d,d,d,d,d,d,l,l,l,l,d,d,d,d,d,d,d,d,d,d,d],[d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d],[d,d,d,d,d,d,d,d,d,d,h,h,d,d,d,d,d,d,d,d,d,d,d,d],[l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l],[d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d]];const _=i.wall,b=(i.coin,i.void),w=i.spikes;var y=[c,u,[[b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b],[b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b],[b,b,b,b,b,b,b,b,b,b,b,b,b,_,_,_,_,_,b,b,b,b,b,b],[b,b,b,b,b,b,b,b,b,b,b,b,b,w,w,w,w,w,b,b,b,b,b,b],[b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b],[b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b],[b,b,b,b,b,b,b,_,b,b,_,_,_,b,b,b,b,b,b,b,b,b,b,b],[b,b,b,b,b,b,_,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b],[b,b,b,b,b,_,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b],[b,b,b,b,_,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b],[_,_,_,_,b,b,b,b,b,b,b,b,_,_,_,_,_,_,_,_,_,_,_,_],[b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b]]],g={background:"#992244",objects:{wall:{body:"#222222",border:"#eeeeee"},coin:"#cccc00"},spikes:"#00ffed"};class f{static getBlockTypeBySymbol(e=""){for(const t in i)if(i[t]===e)return t;return""}}const p=window.THREE;class v{constructor(e=16777215){this._geometry=new p.BoxGeometry(.85,.85,.85),this._material=new p.MeshBasicMaterial({color:e}),this._object=new p.Mesh(this._geometry,this._material),this.getObject=this.getObject.bind(this)}getObject(){return this._object}}const x=window.THREE;class j extends v{constructor(){super(new x.Color(g.objects.wall.body));const e=new x.LineSegments(new x.EdgesGeometry(this._object.geometry),new x.LineBasicMaterial({color:g.objects.wall.border,linewidth:1}));e.renderOrder=1,this._object.add(e)}}const S=window.THREE;class E{constructor(){this._geometry=new S.TorusGeometry(.2,.05,16,100),this._material=new S.MeshBasicMaterial({color:g.objects.coin}),this._object=new S.Mesh(this._geometry,this._material),this._rotationSpeed=.075*Math.random()+.025,this._rotationDir=Math.random()>.5,this.getObject=this.getObject.bind(this),this._rotate=this._rotate.bind(this),this._rotate()}getObject(){return this._object}_rotate(){this._rotationDir?this._object.rotation.y+=this._rotationSpeed:this._object.rotation.y-=this._rotationSpeed,requestAnimationFrame(this._rotate)}}const k=window.THREE;class B{constructor(){this._scene=new k.Scene,this._scene.background=new k.Color(new k.Color(g.background)),this._camera=new k.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),this._scene.add(this._camera),this._renderer=new k.WebGLRenderer({antialias:!0}),this._renderer.setSize(window.innerWidth,window.innerHeight),window.addEventListener("resize",e=>this._renderer.setSize(window.innerWidth,window.innerHeight)),document.body.appendChild(this._renderer.domElement),this._incrementors={camera:{x:0,y:5,z:10}},this.getScene=this.getScene.bind(this),this.getRenderer=this.getRenderer.bind(this),this.buildLevel=this.buildLevel.bind(this),this.insertBlockIntoScene=this.insertBlockIntoScene.bind(this),this.listenForCameraMovements=this.listenForCameraMovements.bind(this),this.animateCameraPosition=this.animateCameraPosition.bind(this),this.clearScene=this.clearScene.bind(this)}getScene(){return this._scene}getRenderer(){return this._renderer}getCamera(){return this._camera}getIncrementors(){return this._incrementors}buildLevel(e=[]){if(Array.isArray(e)){for(let t=0;t<e.length;t++){const n=e[t];if(!Array.isArray(n))return;for(let e=0;e<n.length;e++){const r=f.getBlockTypeBySymbol(n[e]),i=B.getBlockByType(r);this.insertBlockIntoScene(i,{x:e,y:t})}}return this}}insertBlockIntoScene(e,t){if(!e)return;const n=t.x-11.5,r=-1*t.y+8;this._scene.add(e),e.position.set(n,r,0)}static getBlockByType(e=""){let t=null;switch(e){case"wall":t=new j;break;case"coin":t=new E}return t&&t.getObject?t.getObject():null}listenForCameraMovements(){let e=!1,t={};return this._renderer.domElement.addEventListener("wheel",t=>{e=!1,t.deltaY<0?this._incrementors.camera.z>=5&&(this._incrementors.camera.z-=.6):this._incrementors.camera.z<=35&&(this._incrementors.camera.z+=.6)}),this._renderer.domElement.addEventListener("mousedown",t=>{e=!0}),this._renderer.domElement.addEventListener("mouseup",t=>{e=!1}),this._renderer.domElement.addEventListener("mousemove",n=>{if(!e)return;t.x||(t={x:n.x,y:n.y});const r={x:n.x,y:n.y},i=t.x<r.x,s=t.x>r.x;i?this._incrementors.camera.x<17.5&&(this._incrementors.camera.x+=.25):s&&this._incrementors.camera.x>-17.5&&(this._incrementors.camera.x-=.25),t=r}),this}animateCameraPosition(){this._camera.position.x=this._incrementors.camera.x,this._camera.position.y=this._incrementors.camera.y,this._camera.position.z=this._incrementors.camera.z,this._camera.lookAt(new k.Vector3(0,0,0))}clearScene(){for(;this._scene.children.length>0;)this._scene.remove(this._scene.children[0]);return this}}const M=new B,O=function*(e){let t=0;for(;;)yield e[t++%e.length]}(y);r(M,O.next().value),document.getElementById("next-level-btn").addEventListener("click",e=>{r(M,O.next().value)})}]);