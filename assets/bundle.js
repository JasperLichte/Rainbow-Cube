!function(e){var t={};function n(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(i,s,function(t){return e[t]}.bind(null,s));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const i=Object.freeze({background:"#e0dede","objects-cube":"#00ffed","objects-coin":"#cccc00","objects-wall-body":"#222222","objects-wall-border":"#eeeeee","objects-player":"#0087ff","objects-spike":"#ad1818","menu-background":"#6f738e","objects-diamond":"#c300ff"});for(const e in i){if("string"!=typeof i[e])continue;s="--"+e+"-color",r=i[e],document.getElementsByTagName("html")[0].style.setProperty(s,r)}var s,r,o=i,a=Object.freeze({wall:"x",player:"@",lava:"*",coin:"o",void:"-",spikes:"^",diamond:"<>"});const c=a.player,h=a.wall,d=a.coin,l=a.void,m=(a.lava,a.spikes);var u=[[l,l,l,l,l,l,l,l,l,l,l,d,d,l,l,l,l,l,l,l,l,l,l,l],[l,l,l,l,l,l,l,h,h,h,h,h,h,h,h,h,h,h,l,l,l,l,l,l],[l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l],[l,l,l,l,h,h,l,l,l,l,l,l,l,l,l,l,l,l,l,m,m,d,l,l],[l,l,l,l,l,l,l,l,d,d,l,l,l,l,l,l,l,l,l,h,h,h,l,l],[l,l,l,l,l,l,l,h,h,h,h,l,l,d,m,l,l,l,l,l,l,l,l,l],[l,l,l,l,l,l,l,l,l,l,l,l,l,h,h,l,l,l,l,l,l,l,l,l],[l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l],[l,l,l,l,l,l,l,l,l,l,h,h,l,l,l,l,l,l,l,l,l,l,l,l],[c,l,a.diamond,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l],[h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h],[l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l]];const _=a.wall,b=a.coin,p=a.void,w=a.spikes,y=a.player;var g=[[p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p],[p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p],[p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p],[p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p],[p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p],[p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p],[p,p,p,p,p,p,p,p,p,a.diamond,w,w,p,p,p,p,p,p,p,p,p,p,p,p],[p,p,p,p,p,p,p,p,p,_,_,_,_,p,p,p,p,p,p,p,p,p,p,p],[p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p],[y,p,p,p,p,p,p,p,p,p,b,b,p,p,p,p,p,p,p,p,p,p,p,p],[_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],[p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p]];const v=a.wall,f=(a.coin,a.void),E=a.spikes;a.player,a.diamond;var j=[[f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f],[f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f],[f,f,f,f,f,f,f,f,f,f,f,f,f,v,v,v,v,v,f,f,f,f,f,f],[f,f,f,f,f,f,f,f,f,f,f,f,f,E,E,E,E,E,f,f,f,f,f,f],[f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f],[f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f],[f,f,f,f,f,f,f,v,f,f,v,v,v,f,f,f,f,f,f,f,f,f,f,f],[f,f,f,f,f,f,v,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f],[f,f,f,f,f,v,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f],[f,f,f,f,v,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f],[v,v,v,v,f,f,f,f,f,f,f,f,v,v,v,v,v,v,v,v,v,v,v,v],[f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f]];const x=a.wall,k=a.coin,C=a.void,S=a.spikes,B=a.lava,L=a.player,M=a.diamond;var P=[u,g,j,[[C,C,C,C,C,C,C,C,C,C,C,C,C,C,x,x,x,x,C,C,C,C,C,C],[C,C,C,C,C,C,C,C,C,x,C,C,C,C,k,C,C,x,C,C,C,C,C,C],[C,C,C,C,C,C,C,C,k,S,C,C,M,C,x,C,C,x,C,C,C,C,C,C],[C,C,C,C,k,S,C,C,x,x,B,B,x,B,B,x,C,x,C,C,C,C,C,C],[C,C,C,C,x,x,C,M,C,x,x,x,x,x,x,x,C,x,C,C,C,C,C,C],[C,C,C,C,C,C,C,x,C,C,C,C,C,C,C,x,C,x,C,C,C,C,C,C],[C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,x,C,x,C,C,S,k,C,C],[C,C,C,C,C,C,C,x,C,C,C,C,C,C,C,x,C,x,C,C,x,x,C,C],[C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,x,C,x,C,C,C,C,C,x],[L,C,C,C,x,x,x,x,C,C,C,C,C,C,C,x,C,x,C,C,C,C,C,C],[x,x,x,x,C,C,C,C,C,C,C,C,C,C,x,C,k,C,C,C,S,C,C,x],[C,C,C,C,C,C,C,C,C,C,C,C,C,C,x,x,x,x,x,x,x,x,x,x]]];class R{static getBlockTypeBySymbol(e=""){for(const t in a)if(a[t]===e)return t;return""}}const T=window.THREE;class H{constructor(e=16777215){this._geometry=new T.BoxGeometry(1,1,1),this._material=new T.MeshBasicMaterial({color:e}),this._object=new T.Mesh(this._geometry,this._material),this.getObject=this.getObject.bind(this),this.tweakPosition=this.tweakPosition.bind(this)}getObject(){return this._object}tweakPosition(){}}const A=window.THREE;class O extends H{constructor(){super(o["objects-wall-body"]),this._geometry=new A.BoxGeometry(.85,.85,.85),this._object=new A.Mesh(this._geometry,this._material);const e=new A.LineSegments(new A.EdgesGeometry(this._object.geometry),new A.LineBasicMaterial({color:o["objects-wall-border"],linewidth:1}));e.renderOrder=1,this._object.add(e)}}window.THREE;class z extends H{constructor(e=!0,t=!0,n=16777215){super(n),this._rotationSpeed=.01,e&&(this._rotationSpeed=.05*Math.random()+.025),this._rotationDir=!0,t&&(this._rotationDir=Math.random()>.5),this._rotate=this._rotate.bind(this),this._rotate()}_rotate(){this._rotationDir?this._object.rotation.y+=this._rotationSpeed:this._object.rotation.y-=this._rotationSpeed,requestAnimationFrame(this._rotate)}}const I=window.THREE;class F extends z{constructor(){super(!0,!0,o["objects-coin"]),this._geometry=new I.TorusGeometry(.2,.05,16,100),this._object=new I.Mesh(this._geometry,this._material)}tweakPosition(){this._object.position.y-=.2}}const D=window.THREE;class G extends H{constructor(){super(o["objects-player"]),this._geometry=new D.BoxGeometry(.85,.85,.85),this._object=new D.Mesh(this._geometry,this._material),this.getObject=this.getObject.bind(this)}tweakPosition(){this._object.position.y-=.15}}const W=window.THREE;class q extends H{constructor(){super(o["objects-spike"]),this._geometry=new W.ConeGeometry(.3,.3,32),this._object=new W.Mesh(this._geometry,this._material)}tweakPosition(){this._object.position.y-=.425}}const J=window.THREE;class V extends z{constructor(){super(!0,!0,o["objects-diamond"]),this._geometry=new J.OctahedronGeometry(.3),this._object=new J.Mesh(this._geometry,this._material)}tweakPosition(){this._object.position.y-=.2}}const N=window.THREE;class Y{constructor(){this._scene=new N.Scene,this._scene.background=new N.Color(new N.Color(o.background)),this._camera=new N.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),this._scene.add(this._camera),this._renderer=new N.WebGLRenderer({antialias:!0}),this._renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(this._renderer.domElement),this._incrementors={camera:{x:11.5,y:5,z:15}},this.getScene=this.getScene.bind(this),this.getRenderer=this.getRenderer.bind(this),this.buildLevel=this.buildLevel.bind(this),this.insertBlockIntoScene=this.insertBlockIntoScene.bind(this),this.listenForCameraMovements=this.listenForCameraMovements.bind(this),this.animateCameraPosition=this.animateCameraPosition.bind(this),this.clearScene=this.clearScene.bind(this),this._handleResize=this._handleResize.bind(this),this._handleResize()}getScene(){return this._scene}getRenderer(){return this._renderer}getCamera(){return this._camera}getIncrementors(){return this._incrementors}buildLevel(e=[]){if(Array.isArray(e)){for(let t=0;t<e.length;t++){const n=e[t];if(!Array.isArray(n))return;for(let e=0;e<n.length;e++){const i=R.getBlockTypeBySymbol(n[e]),s=Y.getBlockByType(i);this.insertBlockIntoScene(s,{x:e,y:t})}}return this}}insertBlockIntoScene(e,t){let n=null;if(e&&e.getObject&&(n=e.getObject()),!n)return;const i=t.x,s=-1*t.y;this._scene.add(n),n.position.set(i,s,0),e.tweakPosition&&e.tweakPosition()}static getBlockByType(e=""){switch(e){case"wall":return new O;case"coin":return new F;case"player":return new G;case"spikes":return new q;case"diamond":return new V}return null}listenForCameraMovements(){let e=!1,t={};return this._renderer.domElement.addEventListener("wheel",t=>{e=!1,t.deltaY<0?this._incrementors.camera.z>=2&&(this._incrementors.camera.z-=.6):this._incrementors.camera.z<=45&&(this._incrementors.camera.z+=.6)}),this._renderer.domElement.addEventListener("mousedown",t=>{e=!0}),this._renderer.domElement.addEventListener("mouseup",t=>{e=!1}),this._renderer.domElement.addEventListener("mousemove",n=>{if(!e)return;t.x||(t={x:n.x,y:n.y});const i={x:n.x,y:n.y},s=t.x<i.x,r=t.x>i.x;s?this._incrementors.camera.x<35&&(this._incrementors.camera.x+=.25):r&&this._incrementors.camera.x>-35&&(this._incrementors.camera.x-=.25),t=i}),this}animateCameraPosition(){this._camera.position.x=this._incrementors.camera.x,this._camera.position.y=this._incrementors.camera.y,this._camera.position.z=this._incrementors.camera.z,this._camera.lookAt(new N.Vector3(11.5,0,0))}clearScene(){for(;this._scene.children.length>0;)this._scene.remove(this._scene.children[0]);return this}_handleResize(){window.addEventListener("resize",e=>{this._camera.aspect=window.innerWidth/window.innerHeight,this._camera.updateProjectionMatrix(),this._renderer.setSize(window.innerWidth,window.innerHeight)})}}var K=(e,t)=>{e.getIncrementors();const n=e.getScene(),i=e.getCamera(),s=e.getRenderer();e.clearScene().buildLevel(t).listenForCameraMovements(),function t(){e.animateCameraPosition(),s.render(n,i),requestAnimationFrame(t)}()};class Q{constructor(e){e||(e=document.body),this._domParent=e,this._domElement=this._buildDomElement(),this._domParent.appendChild(this._domElement),this.getIncrementors=this.getIncrementors.bind(this),this.clearScene=this.clearScene.bind(this),this.buildLevel=this.buildLevel.bind(this)}getIncrementors(){return this._incrementors}_buildDomElement(){const e=document.createElement("div");return e.setAttribute("class","dom-engine-wrapper"),e}clearScene(){return this._domElement.innerHTML="",this}buildLevel(e){if(Array.isArray(e)){for(let t=0;t<e.length;t++){const n=e[t],i=[];if(!Array.isArray(n))return;for(let e=0;e<n.length;e++)i.push(R.getBlockTypeBySymbol(n[e]));this._appendRow(i)}return this}}_appendRow(e=[]){const t=document.createElement("div");t.setAttribute("class","row"),e.forEach(e=>{const n=document.createElement("span");n.setAttribute("class","block "+e),t.appendChild(n)}),this._domElement.appendChild(t)}}var U=(e,t)=>{e.getIncrementors();e.clearScene().buildLevel(t),function e(){requestAnimationFrame(e)}()};const X=function*(e){let t=0;for(;;)yield e[t++%e.length]};class Z{constructor(){this._domElement=document.createElement("div"),this._domElement.setAttribute("class","menu"),this._wrapper=document.createElement("div"),this._wrapper.setAttribute("class","wrapper"),this._content="",this._wrapper.innerHTML=this._content,this._domElement.appendChild(this._wrapper),document.body.appendChild(this._domElement),this._hasDoneInitialRender=!1,this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.setContent=this.setContent.bind(this),this.getContent=this.getContent.bind(this),this.listenForEvents=this.listenForEvents.bind(this),this._addHamburgerButton=this._addHamburgerButton.bind(this),this._addHamburgerButton()}show(){return this._domElement.style.left="0",this}hide(){return Math.random()>.5?this._domElement.style.left="-100vw":this._domElement.style.left="200vw",this}setContent(e=""){return this._content=e,this._wrapper.innerHTML=this._content,this}getContent(){return this._content}static getContentByType(e="menu"){switch(e){case"menu":return'<div class="menu-wrapper">\n          <h1>Rainbow Runner</h1>\n          <span class="version">Version: 0.1.0</span>\n          <div class="buttons">\n              <button class="play-btn" data-mode="3d">Play in 3d!</button>\n              <button class="play-btn" data-mode="2d">Play in 2d!</button>\n              <a href="https://github.com/JasperLichte/Rainbow-Cube">Contribute</a>\n          </div>\n          <p>By Jasper Lichte and Harun Can</p>\n        </div>'}}listenForEvents(){const e=this._wrapper.querySelectorAll(".play-btn");return e.forEach(t=>{t.addEventListener("click",n=>{if(this.hide(),this._hasDoneInitialRender)return;const i=X(P);let s=null,r=null;"3d"===t.getAttribute("data-mode")?(s=new Y,r=K):(s=new Q(document.getElementById("main")),r=U),r(s,i.next().value),this._hasDoneInitialRender=!0,e.forEach(e=>{e!==t&&e.classList.add("disabled")}),document.getElementById("next-level-btn").addEventListener("click",e=>{r(s,i.next().value)})})}),this}_addHamburgerButton(){return this._hamburger=document.createElement("button"),this._hamburger.setAttribute("class","menu-hamburger"),this._hamburger.innerHTML="<span></span><span></span><span></span>",document.body.appendChild(this._hamburger),this._hamburger.addEventListener("click",e=>{this.show()}),this}}var $={};$.menu=(new Z).setContent(Z.getContentByType("menu")).show().listenForEvents(),$.helpers={}}]);