!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const r=window.THREE;var i=(e,t)=>{let n={camera:{x:0,y:0,z:10}};const i=e.getScene(),o=e.getCamera(),s=e.getRenderer();for(;i.children.length>0;)i.remove(i.children[0]);e.buildLevel(t);const c=e=>{o.position.x=-10*Math.cos(n.camera.x),o.position.y=5*Math.sin(n.camera.y),o.position.z=n.camera.z,o.lookAt(new r.Vector3(0,0,0)),n.camera.x+=.001,n.camera.y+=.00125,s.render(i,o),requestAnimationFrame(c)};c()},o=Object.freeze({wall:"x",player:"@",lava:"*",coin:"o",void:"-",spikes:"^"});const s=o.wall,c=o.coin,l=o.void,a=o.lava;var d=[[l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l],[l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l],[l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l],[l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l],[l,l,l,l,c,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l],[l,l,l,l,s,l,l,l,l,l,c,l,l,l,l,l,l,l,l,l,l,l,l,l],[l,l,l,l,l,l,l,l,s,a,a,a,s,l,l,l,l,l,l,l,l,l,l,l],[l,l,l,l,l,l,l,l,l,s,s,s,l,l,l,s,s,l,l,l,l,l,l,l],[l,l,l,l,l,l,l,l,l,l,l,l,l,s,s,l,l,l,l,l,l,l,l,l],[l,l,l,l,l,l,l,l,l,l,c,c,l,l,l,l,l,l,l,l,l,l,l,l],[s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s],[l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l]];const u=o.wall,h=o.coin,f=o.void,g=o.spikes;var b=[d,[[f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f],[f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f],[f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f],[f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f],[f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f],[f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f],[f,f,f,f,f,f,f,f,f,f,g,g,f,f,f,f,f,f,f,f,f,f,f,f],[f,f,f,f,f,f,f,f,f,u,u,u,u,f,f,f,f,f,f,f,f,f,f,f],[f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f],[f,f,f,f,f,f,f,f,f,f,h,h,f,f,f,f,f,f,f,f,f,f,f,f],[u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u],[f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f]]];class y{static getBlockTypeBySymbol(e=""){for(const t in o)if(o[t]===e)return t;return""}}const w=window.THREE;class m{constructor(e=16777215){this._geometry=new w.BoxGeometry(1,1,1),this._material=new w.MeshLambertMaterial({color:e}),this._cube=new w.Mesh(this._geometry,this._material),this.getCube=this.getCube.bind(this)}getCube(){return this._cube}}class p extends m{constructor(e,t){super(2236962)}}const v=window.THREE;class _{constructor(){this._scene=new v.Scene,this._scene.background=new v.Color(15658734),this._camera=new v.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),this._scene.add(this._camera),this._directionalLight=new v.DirectionalLight(16777215,.5),this._scene.add(this._directionalLight),this._renderer=new v.WebGLRenderer({antialias:!0}),this._renderer.setSize(window.innerWidth,window.innerHeight),window.addEventListener("resize",e=>{this._renderer.setSize(window.innerWidth,window.innerHeight)}),document.body.appendChild(this._renderer.domElement),this.getScene=this.getScene.bind(this),this.getRenderer=this.getRenderer.bind(this),this.buildLevel=this.buildLevel.bind(this),this.insertBlockIntoScene=this.insertBlockIntoScene.bind(this)}getScene(){return this._scene}getRenderer(){return this._renderer}getCamera(){return this._camera}buildLevel(e=[]){if(!Array.isArray(e))return;let t=[];for(let n=0;n<e.length;n++){const r=e[n];if(!Array.isArray(r))return;for(let e=0;e<r.length;e++){const i=y.getBlockTypeBySymbol(r[e]),o=_.getBlockByType(i);o&&t.push({block:o,pos:{x:e,y:n}})}}t=function(e){let t=e.length;for(;t>0;){let n=Math.floor(Math.random()*t),r=e[--t];e[t]=e[n],e[n]=r}return e}(t);let n=0;const r=setInterval(e=>{if(n>=t.length)return void clearInterval(r);const{block:i,pos:o}=t[n++];this.insertBlockIntoScene(i,o)},35)}insertBlockIntoScene(e,t){if(!e)return;const n=t.x-11.5,r=-1*t.y+8;this._scene.add(e),e.position.set(n,r,0)}static getBlockByType(e=""){let t=null;switch(e){case"wall":t=new p}return t&&t.getCube?t.getCube():null}}const S=new _,x=function*(e){let t=0;for(;;)yield e[t++%e.length]}(b);i(S,x.next().value),document.getElementById("next-level-btn").addEventListener("click",e=>{i(S,x.next().value)})}]);